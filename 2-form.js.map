{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["const formState = 'feedback-form-state';\nconst form = document.querySelector('.feedback-form');\nconst formData = { email: '', message: '' };\nconst localState = JSON.parse(localStorage.getItem(formState));\n\nif (localState) {\n  Object.assign(formData, localState);\n  for (const key in formData) {\n    document.querySelector(`[name=\"${key}\"]`).value = formData[key];\n  }\n}\n\nform.addEventListener('input', onInputSaveToLocalStorage);\nform.addEventListener('submit', onSubmitForm);\n\nfunction onInputSaveToLocalStorage(event) {\n  const key = event.target.name;\n  \n  formData[key] = event.target.value.trim();\n\n  localStorage.setItem(formState, JSON.stringify(formData));\n}\n\nfunction onSubmitForm(event) {\n  event.preventDefault();\n\n  if (validateFormFields(formData)) {\n\n    console.log('submit', formData);\n    Object.keys(formData).forEach(key => (formData[key] = ''));\n    localStorage.removeItem(formState);\n    event.target.reset();\n  }\n}\n\nfunction validateFormFields(formDataObj) {\n  let isValid = true;\n  for (const key in formDataObj) {\n    if (!formDataObj[key]) {\n      addBorderInputError(document.querySelector(`[name=\"${key}\"]`));\n      isValid = false;\n    } else {\n      removeBorderInputError(document.querySelector(`[name=\"${key}\"]`));\n    }\n  }\n\n  return isValid;\n}\n\nfunction addBorderInputError(input) {\n  input.classList.add('error');\n}\n\nfunction removeBorderInputError(input) {\n  input.classList.remove('error');\n}\n"],"names":["formState","form","formData","localState","key","onInputSaveToLocalStorage","onSubmitForm","event","validateFormFields","formDataObj","isValid","removeBorderInputError","addBorderInputError","input"],"mappings":"oDAAA,MAAMA,EAAY,sBACZC,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAW,CAAE,MAAO,GAAI,QAAS,EAAE,EACnCC,EAAa,KAAK,MAAM,aAAa,QAAQH,CAAS,CAAC,EAE7D,GAAIG,EAAY,CACd,OAAO,OAAOD,EAAUC,CAAU,EAClC,UAAWC,KAAOF,EAChB,SAAS,cAAc,UAAUE,CAAG,IAAI,EAAE,MAAQF,EAASE,CAAG,CAElE,CAEAH,EAAK,iBAAiB,QAASI,CAAyB,EACxDJ,EAAK,iBAAiB,SAAUK,CAAY,EAE5C,SAASD,EAA0BE,EAAO,CACxC,MAAMH,EAAMG,EAAM,OAAO,KAEzBL,EAASE,CAAG,EAAIG,EAAM,OAAO,MAAM,OAEnC,aAAa,QAAQP,EAAW,KAAK,UAAUE,CAAQ,CAAC,CAC1D,CAEA,SAASI,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEhBC,EAAmBN,CAAQ,IAE7B,QAAQ,IAAI,SAAUA,CAAQ,EAC9B,OAAO,KAAKA,CAAQ,EAAE,QAAQE,GAAQF,EAASE,CAAG,EAAI,EAAG,EACzD,aAAa,WAAWJ,CAAS,EACjCO,EAAM,OAAO,QAEjB,CAEA,SAASC,EAAmBC,EAAa,CACvC,IAAIC,EAAU,GACd,UAAWN,KAAOK,EACXA,EAAYL,CAAG,EAIlBO,EAAuB,SAAS,cAAc,UAAUP,CAAG,IAAI,CAAC,GAHhEQ,EAAoB,SAAS,cAAc,UAAUR,CAAG,IAAI,CAAC,EAC7DM,EAAU,IAMd,OAAOA,CACT,CAEA,SAASE,EAAoBC,EAAO,CAClCA,EAAM,UAAU,IAAI,OAAO,CAC7B,CAEA,SAASF,EAAuBE,EAAO,CACrCA,EAAM,UAAU,OAAO,OAAO,CAChC"}